<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>My LIFF App</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
    button { padding: 10px 16px; font-size: 16px; border: 0; border-radius: 10px; }
    .primary { background: #06C755; color: #fff; }
    .ghost { background: #eee; }
    .box { margin-top: 14px; padding: 12px; border: 1px solid #ddd; border-radius: 12px; text-align: left; }
  </style>
</head>
<body>
  <h1>My LIFF App</h1>
  <p id="status">Loading...</p>

  <div class="box" id="profileBox" style="display:none;">
    <div><b>Name:</b> <span id="name"></span></div>
    <div><b>UserId:</b> <span id="userId"></span></div>
  </div>

  <div style="margin-top:14px;">
    <button class="primary" onclick="sendMsg()">Send message</button>
    <button class="ghost" onclick="addFriend()">Add LINE OA</button>
  </div>

  <script>
    const LIFF_ID = "2007058666-SHyhpmXT";

    async function main() {
      await liff.init({ liffId: LIFF_ID });

      if (!liff.isLoggedIn()) {
        liff.login();
        return;
      }

      const profile = await liff.getProfile();
      document.getElementById("status").innerText = "Ready ‚úÖ";
      document.getElementById("profileBox").style.display = "block";
      document.getElementById("name").innerText = profile.displayName;
      document.getElementById("userId").innerText = profile.userId;
    }

    async function sendMsg() {
      if (!liff.isInClient()) {
        alert("‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ LINE ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô");
        return;
      }
      await liff.sendMessages([{ type: "text", text: "Hello from LIFF üéâ" }]);
      alert("Sent!");
    }

    // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏±‡∏ß‡∏£‡πå: ‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô OA ‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠
    function addFriend() {
      // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô @xxxx ‡πÄ‡∏õ‡πá‡∏ô LINE OA ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
      const oaLink = "https://line.me/R/ti/p/@748svdvs";
      liff.openWindow({ url: oaLink, external: true });
    }

    main();
  </script>
</body>
</html>
